---

title: hagerstrand


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "00_hagerstrand.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_hagerstrand.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/david/.local/lib/python3.8/site-packages/skimage/io/manage_plugins.py:23: UserWarning: Your installed pillow version is &lt; 7.1.0. Several security issues (CVE-2020-11538, CVE-2020-10379, CVE-2020-10994, CVE-2020-10177) have been fixed in pillow 7.1.0 or higher. We recommend to upgrade this library.
  from .collection import imread_collection_wrapper
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Diffusion">Diffusion<a class="anchor-link" href="#Diffusion"> </a></h2><p>Description....</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Diffusion" class="doc_header"><code>class</code> <code>Diffusion</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L15" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Diffusion</code>(<strong><code>mif_size</code></strong>=<em><code>5</code></em>, <strong><code>pob</code></strong>=<em><code>20</code></em>, <strong><code>initial_diff</code></strong>=<em><code>[(50, 50)]</code></em>, <strong><code>p0</code></strong>=<em><code>0.3</code></em>, <strong><code>max_iter</code></strong>=<em><code>15</code></em>)</p>
</blockquote>
<p>Clase general para tdodos los tipos de difusión.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SimpleDiffusion">SimpleDiffusion<a class="anchor-link" href="#SimpleDiffusion"> </a></h2><p>Describe....</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SimpleDiffusion" class="doc_header"><code>class</code> <code>SimpleDiffusion</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L79" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SimpleDiffusion</code>(<strong><code>N</code></strong>=<em><code>100</code></em>, <strong><code>M</code></strong>=<em><code>100</code></em>, <strong><code>mif_size</code></strong>=<em><code>5</code></em>, <strong><code>pob</code></strong>=<em><code>20</code></em>, <strong><code>initial_diff</code></strong>=<em><code>[(50, 50)]</code></em>, <strong><code>p0</code></strong>=<em><code>0.3</code></em>, <strong><code>max_iter</code></strong>=<em><code>15</code></em>) :: <a href="/hager_py/hagerstrand.html#Diffusion"><code>Diffusion</code></a></p>
</blockquote>
<p>Modelo simple de difusión espacial basado en Hägerstrand.
1.- Espacio homogeneo e isotrópico
2.- Un sólo difusor inicial
3.- ....otras suposiciones...
:param N: int Número de renglones en el espacio de simulación
:param M: int Número de columnas en el espacio de simulación
:param mif_size: int Tamaño de la matriz (cuadrada) del MIF (debe ser non)
:param pob: int población en cada celda
:param initial_diff: [(int,int)] Lista de coordenadas de los difusores
                                 iniciales
:param p0: float Probabilidad de auto-difusión
:param max_iter: int Máximo número de iteraciones
:attribute space: np.array(M,N,dtype=np.int8) El espacio disponible
:attribute _pop_array: np.array(M*N,pob,dtype=np.bool) array de habitantes
                       en cada celda
:attribute _infected_pop: list (space_idx,int) Lista de los índices de las
                            celdas adoptantes. La primera entrada es el
                            índice aplanado de la celda en la matriz space y
                            la segunda es el número del poblador en
                            pop_array. Es decir, la lista de las direcciones
                            de cada poblador infectado.
:attribute results: np.array((M,N,max_iter)) Guarda los resultados de cada
                    iteración.
:attribute time_series: list int Propagaciones por cada iteración
:attribute _clean: bool Indica si tenemos resultados guardados.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">SimpleDiffusion</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">20</span><span class="p">,[(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">)],</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">spatial_diffusion</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">random_diffusion</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/plablo/miniconda3/envs/hager_py/lib/python3.7/site-packages/ipykernel_launcher.py:40: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.
Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>acabé
Hay 9130 adoptantes de un total de 50000 habitantes
El total de iteraciones realizadas es 15
acabé
Hay 21656 adoptantes de un total de 50000 habitantes
El total de iteraciones realizadas es 15
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/plablo/miniconda3/envs/hager_py/lib/python3.7/site-packages/ipykernel_launcher.py:54: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.
Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Advanced-Diffusion">Advanced Diffusion<a class="anchor-link" href="#Advanced-Diffusion"> </a></h2><p>Description ...</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="AdvancedDiffusion" class="doc_header"><code>class</code> <code>AdvancedDiffusion</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L309" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>AdvancedDiffusion</code>(<strong><code>N</code></strong>=<em><code>100</code></em>, <strong><code>mif_size</code></strong>=<em><code>5</code></em>, <strong><code>pob</code></strong>=<em><code>20</code></em>, <strong><code>initial_diff</code></strong>=<em><code>[(50, 50)]</code></em>, <strong><code>p0</code></strong>=<em><code>0.3</code></em>, <strong><code>max_iter</code></strong>=<em><code>25</code></em>, <strong><code>density</code></strong>=<em><code>20</code></em>, <strong><code>amplitud</code></strong>=<em><code>4.0</code></em>) :: <a href="/hager_py/hagerstrand.html#Diffusion"><code>Diffusion</code></a></p>
</blockquote>
<p>Hägerstrand-based spatial diffusion model, with heterogeneous space.
1.- Isotropic space
2.- A single initial diffuser
3.- .... Other assumptions ...
:param N: int Number of rows and columns in the simulation space.
:param mif_size: int MIF matrix size (square) (must be odd).
:param pob: int maximum population at each cell.
:param density: int Number of Number of initial population nuclei.
:param amplitud: float Gaussian filter width to blur the population.
:param initial_diff: [(int,int)] Coordinate list of start diffusers
:param p0: float Auto-difussion probability
:param max_iter: int Maximum number of iterations
:attribute space: np.array(N,N,dtype=np.int8) Available space
:attribute _pop_array: np.array(N*N,pob,dtype=np.bool) array of inhabitants in each cell
:attribute _infected_pop: list (space_idx,int) List of adoptive cell indices.
                            The first entry is the flattened index of the cell in the space matrix
                            and the second is the number of the settler in pop_array. That is,
                            the list of addresses of each infected resident.
:attribute results: np.array((N,N,max_iter)) Save results of each iteration.
:attribute time_series: list int Propagation of each iteration.
:attribute _clean: bool Indicates if Indicates if there are saved results.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ad</span> <span class="o">=</span> <span class="n">AdvancedDiffusion</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">25</span><span class="p">,[(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mf">2.8</span><span class="p">)</span>
<span class="n">ad</span><span class="o">.</span><span class="n">spatial_diffusion</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/plablo/miniconda3/envs/hager_py/lib/python3.7/site-packages/ipykernel_launcher.py:40: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.
Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations
/home/plablo/miniconda3/envs/hager_py/lib/python3.7/site-packages/ipykernel_launcher.py:46: DeprecationWarning: `np.bool` is a deprecated alias for the builtin `bool`. To silence this warning, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.
Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>acabé
Hay 24748 adoptantes de un total de 250000 habitantes
El total de iteraciones realizadas es 25
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

