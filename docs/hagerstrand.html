---

title: hagerstrand


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "00_hagerstrand.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_hagerstrand.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Diffusion">Diffusion<a class="anchor-link" href="#Diffusion"> </a></h2><p>Description....</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Diffusion" class="doc_header"><code>class</code> <code>Diffusion</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L15" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Diffusion</code>(<strong><code>mif_size</code></strong>=<em><code>5</code></em>, <strong><code>pob</code></strong>=<em><code>20</code></em>, <strong><code>initial_diff</code></strong>=<em><code>[(50, 50)]</code></em>, <strong><code>p0</code></strong>=<em><code>0.3</code></em>, <strong><code>max_iter</code></strong>=<em><code>15</code></em>)</p>
</blockquote>
<p>General class for all types of diffusion</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Diffusion._mif2delta" class="doc_header"><code>Diffusion._mif2delta</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L50" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Diffusion._mif2delta</code>(<strong><code>index</code></strong>)</p>
</blockquote>
<p>Returns a tuple with the increments to get to the propagated frame.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SimpleDiffusion">SimpleDiffusion<a class="anchor-link" href="#SimpleDiffusion"> </a></h2><p>Describe....</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SimpleDiffusion" class="doc_header"><code>class</code> <code>SimpleDiffusion</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L79" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SimpleDiffusion</code>(<strong><code>N</code></strong>=<em><code>100</code></em>, <strong><code>M</code></strong>=<em><code>100</code></em>, <strong><code>mif_size</code></strong>=<em><code>5</code></em>, <strong><code>pob</code></strong>=<em><code>20</code></em>, <strong><code>initial_diff</code></strong>=<em><code>[(50, 50)]</code></em>, <strong><code>p0</code></strong>=<em><code>0.3</code></em>, <strong><code>max_iter</code></strong>=<em><code>15</code></em>) :: <a href="/hager_py/hagerstrand.html#Diffusion"><code>Diffusion</code></a></p>
</blockquote>
<p>Simple model of spatial diffusion based on Hägerstrand.
1.- Homogeneous and isotropic space
2.- A single initial diffuser
3.- ....other assumptions...
:param N: int Number of rows in simulation space.
:param M: int Number of columns in simulation space.
:param mif_size: int MIF matrix (square) size (must be non).
:param pob: int population in each cell.
:param initial_diff: [(int,int)] Coordinate list of start diffusers.
:param p0: float Probability of self-diffusion.
:param max_iter: int Maximum number of iterations.
:attribute space: np.array(M,N,dtype=int) Available space.
:attribute _pop_array: np.array(M*N,pob,dtype=bool) array of population in each cell
:attribute _infected_pop: list (space_idx,int) List of the adopting cell indices.
                                            The first entry is the flattened index of the cell
                                            in the space array and the second is the number of
                                            the settler in pop_array. That is, the list of addresses
                                            of each infected resident.
:attribute results: np.array((M,N,max_iter)) Save the results of each iteration.
:attribute time_series: list int Propagations for each iteration.
:attribute _clean: bool Indicates if we have saved results.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">SimpleDiffusion</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">20</span><span class="p">,[(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">)],</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">spatial_diffusion</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">random_diffusion</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>finished
There are 10195 adopters out of a total of 50000 inhabitants
The total number of iterations performed is: 15
finished
There are 21588 adopters out of a total of 50000 inhabitants
The total number of iterations performed is: 15
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Advanced-Diffusion">Advanced Diffusion<a class="anchor-link" href="#Advanced-Diffusion"> </a></h2><p>This part of the code is a class created based on the Hägerstrand model and data inherited from simpleDiffusion it is in charge of searching a number of adoptants from a total of inhabitants in a heterogeneous space.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="AdvancedDiffusion" class="doc_header"><code>class</code> <code>AdvancedDiffusion</code><a href="https://github.com/CentroGeo/hager_py/tree/master/hager_py/hagerstrand.py#L302" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>AdvancedDiffusion</code>(<strong><code>N</code></strong>=<em><code>100</code></em>, <strong><code>mif_size</code></strong>=<em><code>5</code></em>, <strong><code>pob</code></strong>=<em><code>20</code></em>, <strong><code>initial_diff</code></strong>=<em><code>[(50, 50)]</code></em>, <strong><code>p0</code></strong>=<em><code>0.3</code></em>, <strong><code>max_iter</code></strong>=<em><code>25</code></em>, <strong><code>density</code></strong>=<em><code>20</code></em>, <strong><code>amplitud</code></strong>=<em><code>4.0</code></em>) :: <a href="/hager_py/hagerstrand.html#Diffusion"><code>Diffusion</code></a></p>
</blockquote>
<p>Hägerstrand-based spatial diffusion model, with heterogeneous space.
1.- Isotropic space
2.- A single initial diffuser
3.- .... Other assumptions ...
:param N: int Number of rows and columns in the simulation space.
:param mif_size: int MIF matrix size (square) (must be odd).
:param pob: int maximum population at each cell.
:param density: int Number of Number of initial population nuclei.
:param amplitud: float Gaussian filter width to blur the population.
:param initial_diff: [(int,int)] Coordinate list of start diffusers
:param p0: float Auto-difussion probability
:param max_iter: int Maximum number of iterations
:attribute space: np.array(N,N,dtype=int) Available space
:attribute _pop_array: np.array(N*N,pob,dtype=bool) array of inhabitants in each cell
:attribute _infected_pop: list (space_idx,int) List of adoptive cell indices.
                            The first entry is the flattened index of the cell in the space matrix
                            and the second is the number of the settler in pop_array. That is,
                            the list of addresses of each infected resident.
:attribute results: np.array((N,N,max_iter)) Save results of each iteration.
:attribute time_series: list int Propagation of each iteration.
:attribute _clean: bool Indicates if Indicates if there are saved results.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ad</span> <span class="o">=</span> <span class="n">AdvancedDiffusion</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">25</span><span class="p">,[(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mf">2.8</span><span class="p">)</span>
<span class="n">ad</span><span class="o">.</span><span class="n">spatial_diffusion</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Done
There are 25050 adoptants from a total of 250000 inhabitants
The total number of iterations performed is 25
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

